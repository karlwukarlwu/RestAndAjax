<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Axios</title>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <button id="btn1">按钮1</button>
        <button id="btn2">按钮2</button>

        <script>
            //这个等于只能设置一次 用下面的 那个create 可以设置多次
            //每次掉对象就行
            axios.defaults.baseURL = "http://localhost:3000"
            axios.defaults.headers.common[
                "Authorization"
            ] = `Bearer ${localStorage.getItem("token")}`

            // axios实例相当于是axios的一个副本，它的功能和axios一样
            // axios的默认配置在实例也同样会生效

            // 两种方法
            //     方法一
            //  但是我可以单独修改axios实例的默认配置
            // const instance = axios.create({
            //     baseURL:"http://localhost:4000"
            // })
            //     方法二
            // const instance = axios.create()
            // instance.defaults.baseURL = "xxx"


            document.getElementById("btn1").onclick = () => {
                instance
                    .get("students")
                    .then((res) => console.log(res.data))
                    .catch((err) => {
                        console.log("出错了", err)
                    })
            }
        </script>
    </body>
</html>
