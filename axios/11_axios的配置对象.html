<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Axios</title>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <button id="btn1">按钮1</button>
        <button id="btn2">按钮2</button>

        <script>
            document.getElementById("btn1").onclick = () => {
                // 直接调用axios发送请求
                // axios(config)
                axios({
                    // baseURL 指定服务器的根目录（路径的前缀）
                    baseURL:"http://localhost:3000",
                    // 请求地址
                    url:"test",
                    //等于是 http://localhost:3000/test

                    // 请求方法，默认是get
                    method:"get",

                    // 指定请求头，其实axios会自动识别请求头的类型
                    // headers:{"Content-type":"application/json"}

                    // 请求体
                    // data:"name=唐僧&age=16"
                    data: {
                        name: "唐僧",
                        age: 18,
                        gender: "男",
                        address: "女儿国"
                    },

                    // params 用来指定路径中的查询字符串
                    // 等于是请求 http://localhost:3000/test?id=1&name=swk
                    params:{
                        id:1,
                        name:"swk"
                    },

                    //timeout 过期时间，时间过期了还没有回复就结束请求
                    timeout:1000,

                    // 用来终止请求
                    // signal
                    //见fetch里面的signal awaitAndFetch

                    // transformRequest 可以用来处理请求数据（data）
                    //         比较冷门
                    // 它需要一个数组作为参数，数组可以接收多个函数，请求发送时多个函数会按照顺序执行
                    // 函数在执行时，会接收到两个参数data和headers
                    //     第一个函数的data和headers 就是上面的data和headers
                    //         第二个函数的data和headers 是前一个函数的data和headers
                    // transformRequest:[function(data, headers){
                    //     // 可以在函数中对data和headers进行修改
                    //     data.name = "猪八戒"
                    //     headers["Content-Type"] = "application/json"
                    //     return data
                    // }, function(data, headers){
                    //     // 最后一个函数必须返回一个字符串，才能使得数据有效
                    //     return JSON.stringify(data)
                    // }]
                    
                })
                    .then((result) => {
                        // result是axios封装过
                        console.log(result.data)
                    })
                    .catch((err) => {
                        console.log("出错了！", err)
                    })
            }


            
        </script>
    </body>
</html>
